---
import Badge from "./Badge.astro";
import CTA from "./CTA.astro";
import type { HomeHighlight } from "@/data/home";

const imageMap = {
  heroCode: "/og/hero-code.svg",
  heroDesign: "/og/hero-design.svg",
  heroHardware: "/og/hero-hardware.svg",
} as const;

interface Props {
  badge: string;
  title: string;
  subtitle: string;
  mission: string;
  ctaPrimary: { label: string; href: string };
  ctaSecondary?: { label: string; href: string };
  highlights: HomeHighlight[];
}

const { badge, title, subtitle, mission, ctaPrimary, ctaSecondary, highlights } = Astro.props as Props;
const resolvedHighlights = highlights.map((item) => ({
  ...item,
  src: imageMap[item.image] ?? imageMap.heroCode,
}));
---
<section class="relative overflow-hidden">
  <div aria-hidden="true" class="absolute inset-0 -z-10 bg-[radial-gradient(1200px_480px_at_50%_-20%,rgba(90,90,255,0.2),transparent)]"></div>
  <div class="container mx-auto flex flex-col gap-16 py-20 md:py-28 lg:flex-row lg:items-center">
    <div class="max-w-3xl space-y-6">
      <Badge label={badge} />
      <h1 class="text-5xl font-semibold tracking-tight md:text-6xl">{title}</h1>
      <p class="text-lg text-[var(--color-muted)]">{subtitle}</p>
      <p class="text-base text-[var(--color-muted)] leading-relaxed">{mission}</p>
      <CTA primary={ctaPrimary} secondary={ctaSecondary} />
    </div>
    <div class="grid flex-1 gap-4 sm:grid-cols-2">
      {resolvedHighlights.map((item) => (
        <figure class="card group overflow-hidden p-0">
          <img src={item.src} alt={item.alt} loading="lazy" class="h-44 w-full object-cover transition duration-300 group-hover:scale-105" />
          <figcaption class="space-y-1 p-4 text-sm text-[var(--color-muted)]">
            <span class="font-medium text-[var(--color-fg)]">{item.caption}</span>
          </figcaption>
        </figure>
      ))}
    </div>
  </div>
  <div aria-hidden="true" class="pointer-events-none absolute -bottom-24 left-1/2 h-48 w-[1200px] -translate-x-1/2 rounded-full opacity-30 blur-3xl" style="background: var(--gradient-primary);"></div>
</section>
