---
import Base from "@/layouts/BaseLayout.astro";
import { isLocale, defaultLocale, type Locale, pathWithLocale } from "@/lib/i18n";

const pathname = Astro.url.pathname;
const guess = pathname.split("/").filter(Boolean)[0];
const lang: Locale = isLocale(guess ?? "") ? (guess as Locale) : defaultLocale;
const home = `/${lang}`;
const title = "Page not found";
const desc = "The page you’re looking for doesn’t exist.";
---
<Base title={title} desc={desc} url={Astro.url.href} lang={lang} noindex={true}>
  <main class="flex min-h-screen flex-col items-center justify-center gap-6 bg-[var(--color-bg)] px-6 text-center">
    <div class="rounded-3xl border border-[var(--color-border)] bg-[var(--color-bg-soft)] px-10 py-16 shadow-sm">
      <p class="text-sm uppercase tracking-[0.3em] text-[var(--color-muted)]">404</p>
      <h1 class="mt-4 text-3xl font-semibold text-[var(--color-fg)]">{lang === 'zh' ? '这页不存在' : 'Page not found'}</h1>
      <p class="mt-2 max-w-md text-sm text-[var(--color-muted)]">
        {lang === 'zh'
          ? '链接可能已更改或暂未发布。返回首页，继续探索技术与设计故事。'
          : 'The link may have changed or isn’t published yet. Head back home to keep exploring technology and design stories.'}
      </p>
      <div class="mt-6 flex flex-col gap-3 sm:flex-row sm:justify-center">
        <a href={home} class="btn btn-primary text-sm">{lang === 'zh' ? '返回首页' : 'Go home'}</a>
        <a href={pathWithLocale(lang, '/blog')} class="btn btn-secondary text-sm">{lang === 'zh' ? '浏览博客' : 'Browse blog'}</a>
      </div>
    </div>
  </main>
</Base>

