---
import Base from "@/layouts/BaseLayout.astro";
import Header from "@/components/Header.astro";
import IntegrationsGrid from "@/components/IntegrationsGrid.astro";
import Footer from "@/components/Footer.astro";
import { SUPPORTED_LOCALES, t, isLocale } from "@/lib/i18n";

export function getStaticPaths() {
  return SUPPORTED_LOCALES.map((lang) => ({ params: { lang } }));
}

export const prerender = true;

const { lang } = Astro.params;
if (!lang || !isLocale(lang)) { throw new Error("Invalid locale"); }
const title = t("integrations", "title", lang);
const subtitle = t("integrations", "subtitle", lang);
const url = Astro.url.href;
---
<Base title={title} desc={subtitle} url={url} lang={lang}>
  <Header lang={lang} />
  <main>
    <IntegrationsGrid title={title} items={[
      {name:'Stripe', icon:'/icons/brands/stripe.svg'},
      {name:'Vercel', icon:'/icons/brands/vercel.svg'},
      {name:'Slack', icon:'/icons/brands/slack.svg'},
      {name:'Notion', icon:'/icons/brands/notion.svg'},
      {name:'Zapier', icon:'/icons/brands/zapier.svg'},
      {name:'HubSpot', icon:'/icons/brands/hubspot.svg'},
    ]} />
    <Footer lang={lang} />
  </main>
</Base>
